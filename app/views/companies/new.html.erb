<% provide(:title, 'New') %>
<h1>New company</h1>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_for(@company) do |f| %>
    	<%= render 'shared/error_messages', object: f.object %>
      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :cuit %>
      <%= f.text_field :cuit %>

      <%= f.label :street %>
      <%= f.text_field :street %>

      <%= f.label :number %>
      <%= f.text_field :number %>

      <%= f.label :floor %>
      <%= f.number_field :floor %>

      <%= f.label :apartment %>
      <%= f.text_field :apartment %>

      <%= f.label :city_id %> 
      <div class="input-group">
        <%= f.hidden_field :city_id %>
        <% if @company.city!=nil %>
          <input type='text' id='company_city_name' value='<%= @company.city.name %>' class='form-control' disabled></input>
          
        <%else%>
           <input type='text' id='company_city_name' class='form-control' disabled></input>
        <%end%>
        <span class="input-group-btn">
           <button type="button" class="btn btn-info" data-toggle="modal" data-target="#popup-city">
            <span class="glyphicon glyphicon-search"></span> Search
           </button>
        </span>
      </div>


      <%= f.label :fixed_tel %>
      <%= f.text_field :fixed_tel %>

      <%= f.label :cel_tel %>
      <%= f.text_field :cel_tel %>

      <%= f.label :email %>
      <%= f.email_field :email %>

      <%= f.label :description %>
      <%= f.text_field :description %>

      <%= f.submit "Create company", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>

<div id='city_popup'>
  <%= render :partial => 'shared/popup', :locals => {:id =>'city', :popup_title => 'Select a city',:popup_form =>'cities/select', :return_place =>'company_city'} %>
</div>